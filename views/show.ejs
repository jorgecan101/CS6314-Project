<%- include ('partials/header') %>


<div class="container">
    <h1> Book Details </h1>


    <p><img src="/images/<%= book.image %>" /></p>
    <p>Title: <%= book.title %></p>
    <p>Author: <%= book.author %></p>
    <p>Publisher: <%= book.publisher %></p>
    <p>Genre: <%= book.genre %></p>
    <p>ISBN: <%= book.isbn %></p>
    <p>Description: <%= book.description %></p>


    <!-- TODO: Give user option to add book to cart from here 
    
        User should be able to click add to cart, and be redirected back to the catalog page, while a POST request is made
        that updates the users cart (via cart.js model??), and the users cart would be updated with the data that was just posted
    -->
    <!--Need to test this after login is working-->
    <% if(user && !user.isAdmin) {%>
        <form action="/book/<%= book._id %>" method="POST">
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
    <%}%>

    <% if(user && user.isAdmin) {%>
        <!--add button for edit and delete book-->
        <a class="btn btn-warning" href="/book/<%= book._id %>/edit" role="button">
        Edit video</a>
    
    
        <form action="/book/<%= book._id %>?_method=DELETE" method="POST">
    
        <button type="submit" class="btn btn-danger">Delete video</button>
    
        </form>
    <%}%>

    <p>
    <a href="/catalog">Back to Catalog</a>
    </p>

</div>
<%- include ('partials/footer') %>
